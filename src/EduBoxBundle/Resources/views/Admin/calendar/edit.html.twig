{% extends '@EduBox/admin_layout.html.twig' %}
{% trans_default_domain 'EduBoxBundle' %}

{% set title = 'Calendar_edit'|trans %}

{% set box_body %}
    <div class="row">
        <div class="col-md-12">
            <div class="form-group {% if not calendar.year.vars.valid %}has-error{% endif %}">
                {% include 'EduBoxBundle:Field:input.html.twig' with {'field':calendar.year} %}
            </div>
        </div>
        <script>
            $("#{{ calendar.year.vars.id }}").on('change',function () {
                var year = Number($(this).val());
                $(".datepicker").val('');
                if (!isNaN(year)) {
                    $(".datepicker").datepicker("option","disabled",false);
                    $(".datepicker").datepicker("option","minDate",(new Date(year+"-01-01 12:00")));
                    $(".datepicker").datepicker("option","maxDate",(new Date((year+1)+"-12-31 12:00")));
                } else {
                    $(".datepicker").datepicker("option","disabled",true);
                }
            })
        </script>
        <div class="col-sm-6 col-md-3">
            <div class="form-group {% if not calendar.quarterOneBegin.vars.valid %}has-error{% endif %}">
                {% include 'EduBoxBundle:Field:date.html.twig' with {'minDate':calendar.vars.value.year~'-01-01','maxDate':(calendar.vars.value.year+1)~'-12-31','field':calendar.quarterOneBegin} %}
            </div>
        </div>
        <div class="col-sm-6 col-md-3">
            <div class="form-group {% if not calendar.quarterOneEnd.vars.valid %}has-error{% endif %}">
                {% include 'EduBoxBundle:Field:date.html.twig' with {'minDate':calendar.vars.value.year~'-01-01','maxDate':(calendar.vars.value.year+1)~'-12-31','field':calendar.quarterOneEnd} %}
            </div>
        </div>
        <div class="col-sm-6 col-md-3">
            <div class="form-group {% if not calendar.quarterTwoBegin.vars.valid %}has-error{% endif %}">
                {% include 'EduBoxBundle:Field:date.html.twig' with {'minDate':calendar.vars.value.year~'-01-01','maxDate':(calendar.vars.value.year+1)~'-12-31','field':calendar.quarterTwoBegin} %}
            </div>
        </div>
        <div class="col-sm-6 col-md-3">
            <div class="form-group {% if not calendar.quarterTwoEnd.vars.valid %}has-error{% endif %}">
                {% include 'EduBoxBundle:Field:date.html.twig' with {'minDate':calendar.vars.value.year~'-01-01','maxDate':(calendar.vars.value.year+1)~'-12-31','field':calendar.quarterTwoEnd} %}
            </div>
        </div>
        <div class="col-sm-6 col-md-3">
            <div class="form-group {% if not calendar.quarterThreeBegin.vars.valid %}has-error{% endif %}">
                {% include 'EduBoxBundle:Field:date.html.twig' with {'minDate':calendar.vars.value.year~'-01-01','maxDate':(calendar.vars.value.year+1)~'-12-31','field':calendar.quarterThreeBegin} %}
            </div>
        </div>
        <div class="col-sm-6 col-md-3">
            <div class="form-group {% if not calendar.quarterThreeEnd.vars.valid %}has-error{% endif %}">
                {% include 'EduBoxBundle:Field:date.html.twig' with {'minDate':calendar.vars.value.year~'-01-01','maxDate':(calendar.vars.value.year+1)~'-12-31','field':calendar.quarterThreeEnd} %}
            </div>
        </div>
        <div class="col-sm-6 col-md-3">
            <div class="form-group {% if not calendar.quarterFourBegin.vars.valid %}has-error{% endif %}">
                {% include 'EduBoxBundle:Field:date.html.twig' with {'minDate':calendar.vars.value.year~'-01-01','maxDate':(calendar.vars.value.year+1)~'-12-31','field':calendar.quarterFourBegin} %}
            </div>
        </div>
        <div class="col-sm-6 col-md-3">
            <div class="form-group {% if not calendar.quarterFourEnd.vars.valid %}has-error{% endif %}">
                {% include 'EduBoxBundle:Field:date.html.twig' with {'minDate':calendar.vars.value.year~'-01-01','maxDate':(calendar.vars.value.year+1)~'-12-31','field':calendar.quarterFourEnd} %}
            </div>
        </div>
        <div class="col-md-12">
            <div class="form-group {% if not calendar.holidays.vars.valid %}has-error{% endif %}">
                {% include 'EduBoxBundle:Field:input.html.twig' with {'field':calendar.holidays} %}
            </div>
        </div>
    </div>
{% endset %}


{% block content %}
    {{ form_start(calendar) }}
        {% include 'EduBoxBundle:Block:box.html.twig' with {
            'box_body': box_body
        } only %}

        <div class="sonata-ba-form-actions well well-small form-actions">
            {% include 'EduBoxBundle:Field:input.html.twig' with {'field':calendar.submit,'field_attr':{'class':'btn btn-success'}} %}
        </div>
    {{ form_end(calendar) }}
{% endblock %}